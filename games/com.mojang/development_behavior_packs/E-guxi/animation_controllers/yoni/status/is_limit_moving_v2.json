{
  "format_version": "1.10.0",
  "animation_controllers": {
    "controller.animation.yoni.status.limit_moving_v2": {
      "initial_state": "loop1",
      "states": {
        "loop1": {
          "on_entry": [
            "v.position.old.x = v.position.x ?? query.position(0);",
            "v.position.old.y = v.position.y ?? query.position(1);",
            "v.position.old.z = v.position.z ?? query.position(2);",
            "v.position.x = query.position(0);",
            "v.position.y = query.position(1);",
            "v.position.z = query.position(2);",
            "v.position.delta.x = (v.position.old.x - v.position.x);",
            "v.position.delta.y = (v.position.old.y - v.position.y);",
            "v.position.delta.z = (v.position.old.z - v.position.z);",
            "v.delta = math.sqrt(math.pow(v.position.delta.x, 2) + math.pow(v.position.delta.y, 2) + math.pow(v.position.delta.z, 2));",
            "v.moving_speed = ((v.moving_speed ?? 0) + (v.delta / 20));"
          ],
          "transitions": [
            {
              "loop2": "v.moving_speed == 0"
            },
            {
              "loop2": "v.moving_speed <= 0.1"
            },
            {
              "loop2": "v.moving_speed <= 0.2"
            },
            {
              "loop2": "v.moving_speed <= 0.3"
            },
            {
              "loop2": "v.moving_speed <= 0.4"
            },
            {
              "loop2": "v.moving_speed <= 0.5"
            },
            {
              "loop2": "v.moving_speed <= 0.6"
            },
            {
              "loop2": "v.moving_speed <= 0.7"
            },
            {
              "loop2": "v.moving_speed <= 1.0"
            },
            {
              "loop2": "v.moving_speed <= 1.5"
            },
            {
              "loop2": "v.moving_speed <= 2.0"
            },
            {
              "loop2": "v.moving_speed <= 3.0"
            },
            {
              "loop2": "v.moving_speed <= 4.0"
            },
            {
              "loop2": "v.moving_speed <= 5.0"
            },
            {
              "loop2": "v.moving_speed <= 6.0"
            },
            {
              "loop2": "v.moving_speed <= 7.0"
            },
            {
              "loop2": "v.moving_speed <= 10.0"
            },
            {
              "loop2": "v.moving_speed <= 15.0"
            },
            {
              "loop2": "v.moving_speed <= 20.0"
            }
          ]
        },
        "loop2": {
          "on_entry": [
            "/function yoni/status/limit_moving"
          ],
          "transitions": [
            {
              "loop1": "(1.0)"
            }
          ]
        }
      }
    }
  }
}